# Missing Semester of CS education

## Topic 1 :Shell

* 计算机需要人和计算机交互的接口
* shell是一个字符接口，允许执行程序，输入并获取半结构化的输出
* `Brourne Again Shell`简称`Bash`

### shell的使用

* 执行程序`data`
* 执行程序并向程序传递参数`echo hello`如果参数中包含空格，使用单引号包裹或转义符号
* shell寻找程序和参数：shell是一个编程环境，执行命令代表执行一段shell可以执行的短代码，shell会自动搜索环境变量PATH

### shell中使用文件系统访问磁盘资源

* 常见文件系统命令：ls pwd cd 上级目录与自身，绝对目录与相对目录
* 命令参数
* 文件权限：文件所有者，用户组，所有成员，可修改(w)，可执行(x)，读权限(r)，是否是目录(d)

### 程序间创建链接

* Shell中的流：输入流，输出流。程序在输入流中读取信息，在输出流中输出信息
* 重定向：`< file`和`> file`
* 追加内容：`>>`
* 管道pipes，将一个程序的输出和一个程序的输入关联起来

### Root User

shell执行不同的命令，程序不知道输入输出流的变化，设置程序的输入输出流的工作由shell完成

## Topic 2:Shell Tools and Scripts

### Shell scripts

* 变量赋值
* 访问变量中存储的内容，加上$
* 空格会让shell认为这是命令参数
* “”与‘’意义不一样，前者会将变量值进行转换，后者为原义字符串
* 控制流关键字:`if case while for 函数与参数`
* Shell中特殊变量表示参数、错误代码和相关变量
  * $0,脚本名
  * $1-\$9脚本的参数
  * $@脚本的所有参数
  * $#参数个数
  * $\$当前脚本的进程识别码
  * $?前一个命令的返回值
  * !!完整的上一条指令，包括参数，权限不足执行失败的处理
  * $_上一条命令的最后一个参数，交互式shell通过按下Esc后键入.获取这个值
* 使用STDOUT返回输出值，STDERR返回错误集错误码
* 使用&&与||进行条件判断，同一行多个命令使用;分隔
* 命令替换：使用$(CMD)执行CMD命令，输出结果会替换掉\$(CMD)
* 进程替换:<(CMD)执行CMD并将结果输出到临时文件中，并将CMD替换为临时文件名，返回值通过文件而不是STDIN传递

### Shell Programing

#### Shell 变量

* 定义变量时，变量名不加$

  * 命名与C命名规则相同
  * 不能使用bash关键字

* 使用定义过的变量，在变量名前加上$

  * 变量可以在外面加上可选的{}

* 只读变量

  * readonly关键字

* 删除变量

  * unset关键字，但是不能删除只读变量

* 变量类型

  * 局部变量：在脚本和命令中定义，仅在当前shell实例中有效
  * 环境变量
  * shell变量：shell程序设置的特殊变量

* shell数组

  * 定义数组，值之间用空格分隔
  * 读取数组：数组名+下标，可以使用不连续的下标注意加上{}
  * 获取数组长度${#array_name[@]}数组元素个数

* shell字符串

  * 单引号：单引号中的任何字符都会原样输出
  * 单引号字符串中不能出现单独一个单引号
  * 双引号

  * 双引号中可以有变量
  * 双引号中可以出现转义字符
  * 字符串长度#字符串变量名
  * 子串：字符串变量名:lowerbound:upperbound

#### Shell传递参数

* 脚本内获取参数$n
* $0是文件名

#### Shell数组

* 支持一维数组，不需要在初始化的时候定义数组大小
* 数组元素下标从0开始
* array_name=(value1 value2 value2 value3 ... valuen)
* 读取数组${array_name[index]}
* 获取数组中所有元素@ * $(array_name[*/@])
* 获取数组的长度 $(#array_name[*/@])

#### Shell运算符

##### expr简单的数学运算

* 表达式和运算符之间要有空格 2 + 2
* 完整的表达式要用``包含

##### 算数运算符

注意：条件表达式要放在方括号之间，并且要有空格[ \$a == \$b]

##### 关系运算符

a=10 b=20

| 运算符 | 说明                                                  | 举例                       |
| :----- | :---------------------------------------------------- | :------------------------- |
| -eq    | 检测两个数是否相等，相等返回 true。                   | [ $a -eq $b ] 返回 false。 |
| -ne    | 检测两个数是否不相等，不相等返回 true。               | [ $a -ne $b ] 返回 true。  |
| -gt    | 检测左边的数是否大于右边的，如果是，则返回 true。     | [ $a -gt $b ] 返回 false。 |
| -lt    | 检测左边的数是否小于右边的，如果是，则返回 true。     | [ $a -lt $b ] 返回 true。  |
| -ge    | 检测左边的数是否大于等于右边的，如果是，则返回 true。 | [ $a -ge $b ] 返回 false。 |
| -le    | 检测左边的数是否小于等于右边的，如果是，则返回 true。 | [ $a -le $b ] 返回 true。  |

##### 逻辑运算符与布尔运算符

| 运算符 | 说明                                                | 举例                                     |
| :----- | :-------------------------------------------------- | :--------------------------------------- |
| !      | 非运算，表达式为 true 则返回 false，否则返回 true。 | [ ! false ] 返回 true。                  |
| -o     | 或运算，有一个表达式为 true 则返回 true。           | [ $a -lt 20 -o $b -gt 100 ] 返回 true。  |
| -a     | 与运算，两个表达式都为 true 才返回 true。           | [ $a -lt 20 -a $b -gt 100 ] 返回 false。 |

| 运算符 | 说明       | 举例                                        |
| :----- | :--------- | :------------------------------------------ |
| &&     | 逻辑的 AND | [[ \$a -lt 100 && \$b -gt 100 ]] 返回 false |
| \|\|   | 逻辑的 OR  | [[ $a -lt 100 || $b -gt 100 ]] 返回 true    |

##### 字符串运算符

a="abc" b="efg"

| 运算符 | 说明                                         | 举例                     |
| :----- | :------------------------------------------- | :----------------------- |
| =      | 检测两个字符串是否相等，相等返回 true。      | [ $a = $b ] 返回 false。 |
| !=     | 检测两个字符串是否相等，不相等返回 true。    | [ $a != $b ] 返回 true。 |
| -z     | 检测字符串长度是否为0，为0返回 true。        | [ -z $a ] 返回 false。   |
| -n     | 检测字符串长度是否不为 0，不为 0 返回 true。 | [ -n "$a" ] 返回 true。  |
| $      | 检测字符串是否为空，不为空返回 true。        | [ $a ] 返回 true。       |

##### 文件测试运算符

* 判断Unix文件系统的文件属性

| 操作符  | 说明                                                         | 举例                      |
| :------ | :----------------------------------------------------------- | :------------------------ |
| -b file | 检测文件是否是块设备文件，如果是，则返回 true。              | [ -b $file ] 返回 false。 |
| -c file | 检测文件是否是字符设备文件，如果是，则返回 true。            | [ -c $file ] 返回 false。 |
| -d file | 检测文件是否是目录，如果是，则返回 true。                    | [ -d $file ] 返回 false。 |
| -f file | 检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。 | [ -f $file ] 返回 true。  |
| -g file | 检测文件是否设置了 SGID 位，如果是，则返回 true。            | [ -g $file ] 返回 false。 |
| -k file | 检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。  | [ -k $file ] 返回 false。 |
| -p file | 检测文件是否是有名管道，如果是，则返回 true。                | [ -p $file ] 返回 false。 |
| -u file | 检测文件是否设置了 SUID 位，如果是，则返回 true。            | [ -u $file ] 返回 false。 |
| -r file | 检测文件是否可读，如果是，则返回 true。                      | [ -r $file ] 返回 true。  |
| -w file | 检测文件是否可写，如果是，则返回 true。                      | [ -w $file ] 返回 true。  |
| -x file | 检测文件是否可执行，如果是，则返回 true。                    | [ -x $file ] 返回 true。  |
| -s file | 检测文件是否为空（文件大小是否大于0），不为空返回 true。     | [ -s $file ] 返回 true。  |
| -e file | 检测文件（包括目录）是否存在，如果是，则返回 true。          | [ -e $file ] 返回 true。  |

## VIM